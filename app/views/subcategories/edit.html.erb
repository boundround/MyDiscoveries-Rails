<div class="container">
  <h2>Edit Subcategory</h2>
  <%= simple_form_for @subcategory do |f| %>
    <%= f.input :name, input_html: { class: 'form-control' } %>
    <%= f.input :category_type, as: :select, collection: @subcategory_types, input_html: { class: 'form-control' } %>
    <%= f.input :icon, as: :file %>
    <%= f.input :primary_description, label: "Primary Description", input_html: {class: "form-control", id: "primary_textarea"} %>
    <div>Character Count: <span id="primary_count"></span></div>
    <%= f.input :secondary_description, label: "Secondary Description", input_html: {class: "form-control", id: "secondary_textarea"} %>
    <div>Character Count: <span id="secondary_count"></span></div>
    <div class="field subcategory">
      <strong>Secondary categories</strong><br>
        <div class="row">
        <% @subcategories.each do |category| %>
            <% if category.category_type == "subcategory" %>
              <div class="col-md-3">
                <%= hidden_field_tag "subcategory[related_to][]", nil%>
                <%= check_box_tag "subcategory[related_to][]", category.id, @subcategory.related_to.include?(category.id.to_s), id: dom_id(category) %>
                <%= label_tag dom_id(category), category.name %>
              </div>
          <% end %>
        <% end %>
        </div>
      </div>
    <%= f.submit :submit %>
  <% end %>
</div>

<script>
  $("#primary_count").text($("#primary_textarea").val().length);
  $("#secondary_count").text($("#secondary_textarea").val().length);
  $("#primary_textarea").keyup(function(){
    $("#primary_count").text($(this).val().length);
  });

  $("#secondary_textarea").keyup(function(){
    $("#secondary_count").text($(this).val().length);
  });
</script>
