#ReadMe	

There are seven scripts used to generate bundles for the Bound Round app.  The first two are related to asset generation.
	

##1. Generate master icon pngs

March 2014, UPDATE: [PHOTOSHOP GENERATOR](http://blogs.adobe.com/photoshopdotcom/2013/09/introducing-adobe-generator-for-photoshop-cc.html),  CREATES THESE FILES AUTOMATICALLY!  CHANGE THIS PROCESS. 

Note, you may have to manually modify the psd file (in this case icons-sydney.psd) to turn any layers generated by Adobe Illustrator's export into Groups.  ()For example, MadameTassauds passport stamp is converted to a layer rather than a group in photoshop.)

UPDATE: DON'T RELY ON GROUP EXPORT, FAILS UNDER CERTAIN CONDITIONS. ICONS MUST COME IN THE FORM OF PSD WITH FLATTENED LAYERS.

	DON'T DO THIS : python ../../../scripts/getVisibleGroups.py ../icons-sydney.psd

	DO THIS : python ../../../scripts/getVisibleLayers.py ../icons-sydney-flattened.psd



Usage:
	
	cd icons
	
	python ../../../scripts/getVisibleGroups.py ../[icon_file.psd]
	
Examples:
	
	
	python ../../../scripts/getVisibleLayers.py ../fiji_icons.psd

	python ../../../scripts/getVisibleLayers.py ../icons-canberra.psd

	python ../../../scripts/getVisibleLayers.py ../melbourne.psd
	
	python ../../../scripts/getVisibleLayers.py ../uluru_icons.psd
	
	python ../../../scripts/getVisibleLayers.py ../PhillipIsland_icons.psd

	python ../../../scripts/getVisibleLayers.py ../Blue_Mountains_icons.psd


##2 Fetching Tiles For a Location

Get sw & ne latitude and longitude for rectangular region surrounding the city 
	
	http://itouchmap.com/latlong.html

Run python script 


	python ../../scripts/fetchtiles.py swlat swlon nelat nelon zmin zmax <fetch = "NO" or "YES">


This generates a tiles directory in the present working directory when script is launched

Takes 1 second per tile, there are 3 tiles for each region (roads, water and land use)

Once Completed, copy the files into the caches directory on the whirly test app and then zoom in to the relevant region to test

If all checks out, add it to the location bundle, zip it up and host on rackspace

###IMPORTANT : Double check the number of tiles 

*****NEW******
We have a new function that will both fetch vector tiles and generate single raster tiles AND OVER project beyond a specified vector retrieval zoom.

!BUT THIS DOESNT WORK FOR IOS APP BECAUSE IT WRITES IN SLIPPY DIRECTORY STRUCTURE INSTEAD!  USE fetchtiles.py instead

This is run in a shell script
	#Sydney s w n e minzoom maxzoom projectzoom
	python fetchandgentiles.py -34.147648 150.279922 -33.510216 151.402588 0 12 15 YES
	
	#Canberra
	python fetchandgentiles.py -25.367295 130.951538 -25.233206 131.105347 0 12 15 YES
	
	#FIJI	
	python fetchandgentiles.py  -18.273042 177.176514 -18.210437 177.235565 0 12 15 YES
		
	#Melbourne -37.854796 144.754486 -37.62674 145.32989
	python fetchandgentiles.py  -37.854796 144.754486 -37.62674 145.329895 0 12 15 YES
	
	#Uluru -25.367295 130.951538 -25.233206 131.105347
	python fetchandgentiles.py  -25.367295 130.951538 -25.233206 131.105347 0 12 15 YES
		
	#Hong Kong 22.184692 113.832779 22.396893 113.843765
	python fetchandgentiles.py  22.184692 113.832779 22.507482 114.349823 0 12 15 YES
		
	#Singapore 1.191448 103.644398 1.45299 104.078015	
	python fetchandgentiles.py  1.191448 103.644398 1.45299 104.078015 0 12 15 YES
	
	#Phillip Island 1.191448 103.644398 1.45299 104.078015
	python fetchandgentiles.py  -38.523897 145.101757 -38.46962 145.491085 0 12 15 YES
	
	#Blue Mountains -33.98208626 149.831543 -33.37985268 150.7516479 
	python fetchandgentiles.py  -33.98208626 149.831543 -33.37985268 150.7516479 0 12 15 YES
	
	#Lake Macquarie 
	python fetchandgentiles.py  -33.192731 151.309204 -32.952216 151.78299 0 12 15 YES
	
	#Brisbane
	python fetchandgentiles.py  -27.839076 152.803345 -27.13248 153.374634 0 12 15 YES
	
	#Sunshine Coast
	python fetchandgentiles.py  -27.839076 152.803345 -27.13248 153.374634 0 12 15 YES
		
	#Perth
	python fetchandgentiles.py  -32.277845 115.392151 -31.311408 116.581421 0 12 15 YES

-------------  NEW FOR VIRGIN APP --------------

(in mapnik.noindex development directory) -- Generates png tiles from vector source, can over zoom interpolate
	python fetchandgentiles.py -34.617122 150.754395 -34.306612 150.965881 0 12 14 YES  #The Illawarra
	python fetchandgentiles.py -35.243113 138.372803 -34.650226 138.750458 0 12 14 YES  #Adelaide
	python fetchandgentiles.py -17.021026 145.623779 -16.729283 145.851746 0 12 14 YES  #Cairns
	python fetchandgentiles.py -12.527596 130.805969 -12.370699 131.014023 0 12 14 YES  #Darwin
	python fetchandgentiles.py -33.612403 151.246033 -33.1784 151.633301 0 12 14 YES  #NSW Central Coast
	python fetchandgentiles.py -36.535864 148.193207 -36.308226 148.687592 0 12 14 YES  #Snowy Mountains
	python fetchandgentiles.py -43.910013 144.448242 -40.292359 148.776855 0 10 10 YES  #Tasmania
	python fetchandgentiles.py -8.916362 114.417114 -8.025957 115.751953 0 12 14 YES  #Bali
	python fetchandgentiles.py -37.04944 174.534302 -36.696795 174.988861 0 12 14 YES  #Auckland
	python fetchandgentiles.py -43.60204 172.472992 -43.440721 172.832794 0 12 14 YES  #Christchurch
	python fetchandgentiles.py -45.914265 170.428162 -45.842082 170.557938 0 12 14 YES  #Dunedin
	python fetchandgentiles.py -45.365202 168.196564 -44.816459 168.929901 0 12 14 YES  #Queenstown
	python fetchandgentiles.py -38.167908 176.183624 -38.026873 176.343613 0 12 14 YES  #Rotarua
	python fetchandgentiles.py -41.341187 174.746819 -41.262263 174.830589 0 12 14 YES  #Wellington
	python fetchandgentiles.py -14.151307 -172.871246 -13.354256 -171.340027 0 12 14 YES  #Samoa
	python fetchandgentiles.py 13.474083 100.268097 13.954684 100.804367 0 12 14 YES  #Bangkok
	python fetchandgentiles.py 7.796877 98.345833 7.948556 98.465996 0 12 14 YES  #Phuket 
	python fetchandgentiles.py -21.306987 -175.426254 -20.97268 -174.959335 0 12 14 YES  #Tonga 
	python fetchandgentiles.py -17.884353 168.071594 -17.358667 168.65593 0 12 14 YES  #Vanuatu 
	python fetchandgentiles.py -12.558271 130.773697 -12.343712 131.003036 0 12 14 YES #Darwin
	python fetchandgentiles.py 33.2749543 -118.5309471 34.1777107 -117.8394459 0 12 14 YES #los-angeles
	python fetchandgentiles.py 37.7643702 -122.493914 37.8249798 -122.401514 0 12 14 YES #san-francisco	
***OLD***

	# DOUBLE CHECK THE NUMBER OF TILES TO BE RETRIEVED FIRST!
	python ../../../scripts/fetchtiles.py -35.363931 149.036407 -35.232795 149.227295 0 12 NO
	
	#IF NUMBER OF TILES IS REASONABLE (e.g. ~500)
	python ../../../scripts/fetchtiles.py -35.363931 149.036407 -35.232795 149.227295 0 12 YES


Examples:

	cd tiles

	python ../../../scripts/fetchtiles.py -12.558271 130.773697 -12.343712 131.003036 0 12 NO #Darwin
	python ../../../scripts/fetchtiles.py -12.558271 130.773697 -12.343712 131.003036 0 12 YES #Darwin

	python ../../../scripts/fetchtiles.py 33.2749543 -118.5309471 34.1777107 -117.8394459 0 12 NO #los-angeles
	python ../../../scripts/fetchtiles.py 33.2749543 -118.5309471 34.1777107 -117.8394459 0 12 YES #los-angeles

	python ../../../scripts/fetchtiles.py 37.7643702 -122.493914 37.8249798 -122.401514 0 12 NO #san-francisco	
	python ../../../scripts/fetchtiles.py 37.7643702 -122.493914 37.8249798 -122.401514 0 12 YES #san-francisco	
		
FIJI

	# DOUBLE CHECK THE NUMBER OF TILES TO BE RETRIEVED FIRST!
	python ../../../scripts/fetchtiles.py -18.210437 177.235565 -18.273042 177.176514 0 12 NO
	
	#IF NUMBER OF TILES IS REASONABLE (e.g. ~500)
	python ../../../scripts/fetchtiles.py -18.210437 177.235565 -18.273042 177.176514 0 12 YES
	
Melbourne -37.854796 144.754486 -37.62674 145.32989

	# DOUBLE CHECK THE NUMBER OF TILES TO BE RETRIEVED FIRST!
	python ../../../scripts/fetchtiles.py -37.854796 144.754486 -37.62674 145.329895 0 12 NO
	
	#IF NUMBER OF TILES IS REASONABLE (e.g. ~500)
	python ../../../scripts/fetchtiles.py -37.854796 144.754486 -37.62674 145.329895 0 12 YES

Uluru -25.367295 130.951538 -25.233206 131.105347
	
	# DOUBLE CHECK THE NUMBER OF TILES TO BE RETRIEVED FIRST!
	python ../../../scripts/fetchtiles.py -25.367295 130.951538 -25.233206 131.105347 0 12 NO
	
	#IF NUMBER OF TILES IS REASONABLE (e.g. ~500)
	python ../../../scripts/fetchtiles.py -25.367295 130.951538 -25.233206 131.105347 0 12 YES
	
Hong Kong 22.184692 113.832779 22.396893 113.843765

	# DOUBLE CHECK THE NUMBER OF TILES TO BE RETRIEVED FIRST!
	python ../../../scripts/fetchtiles.py 22.184692 113.832779 22.507482 114.349823 0 12 NO
	
	#IF NUMBER OF TILES IS REASONABLE (e.g. ~500)
	python ../../../scripts/fetchtiles.py 22.184692 113.832779 22.507482 114.349823 0 12 YES
	
Singapore 1.191448 103.644398 1.45299 104.078015	

	# DOUBLE CHECK THE NUMBER OF TILES TO BE RETRIEVED FIRST!
	python ../../../scripts/fetchtiles.py 1.191448 103.644398 1.45299 104.078015 0 12 NO
	
	#IF NUMBER OF TILES IS REASONABLE (e.g. ~500)
	python ../../../scripts/fetchtiles.py 1.191448 103.644398 1.45299 104.078015 0 12 YES

Phillip Island 1.191448 103.644398 1.45299 104.078015

	# DOUBLE CHECK THE NUMBER OF TILES TO BE RETRIEVED FIRST!
	python ../../../scripts/fetchtiles.py -38.523897 145.101757 -38.46962 145.491085 0 12 NO
	
	#IF NUMBER OF TILES IS REASONABLE (e.g. ~500)
	python ../../../scripts/fetchtiles.py -38.523897 145.101757 -38.46962 145.491085 0 12 YES

Blue Mountains -33.98208626 149.831543 -33.37985268 150.7516479 

	# DOUBLE CHECK THE NUMBER OF TILES TO BE RETRIEVED FIRST!
	python ../../../scripts/fetchtiles.py -33.98208626 149.831543 -33.37985268 150.7516479 0 12 NO
	
	#IF NUMBER OF TILES IS REASONABLE (e.g. ~500)
	python ../../../scripts/fetchtiles.py -33.98208626 149.831543 -33.37985268 150.7516479 0 12 YES

Lake Macquarie 

	# DOUBLE CHECK THE NUMBER OF TILES TO BE RETRIEVED FIRST!
	python ../../../scripts/fetchtiles.py -33.17779 151.353149 -32.952216 151.78299 0 12 NO

	python ../../../scripts/fetchtiles.py -33.192731 151.309204 -32.952216 151.78299 0 12 YES

Brisbane
	# DOUBLE CHECK THE NUMBER OF TILES TO BE RETRIEVED FIRST!
	python ../../../scripts/fetchtiles.py -27.839076 152.803345 -27.13248 153.374634 0 12 NO

	python ../../../scripts/fetchtiles.py -27.839076 152.803345 -27.13248 153.374634 0 12 YES

Sunshine Coast
	# DOUBLE CHECK THE NUMBER OF TILES TO BE RETRIEVED FIRST!
	python ../../../scripts/fetchtiles.py -27.075023 152.541046 -24.567108 153.511963 0 12 NO

	python ../../../scripts/fetchtiles.py -27.839076 152.803345 -27.13248 153.374634 0 12 YES
	
Perth
	# DOUBLE CHECK THE NUMBER OF TILES TO BE RETRIEVED FIRST!
	python ../../../scripts/fetchtiles.py -32.277845 115.392151 -31.311408 116.581421 0 12 NO

	python ../../../scripts/fetchtiles.py -32.277845 115.392151 -31.311408 116.581421 0 12 YES
	
##3. Generate plist for an area
When the global schematic has been adequately updated with the content for the area, ready to generate the relevant plist that the app uses to browse through the content.

	python ../scripts/generatearea.py ../[schematic.xls] [area] ./ > [area].json


	#Move into the relevant area sub directory
	cd sydney
	
	#Run python script to generate json file
	python ../scripts/generatearea.py ../Global_Schematic_MASTER20140108.xlsx sydney ./ > sydney.json
	
	python ../scripts/generatearea.py ../Global_Schematic_MASTER20140108.xlsx canberra ./ > canberra.json
	
	python ../scripts/generatearea.py ../Global_Schematic_MASTER20140108.xlsx goldcoast ./ > goldcoast.json

	python ../scripts/generatearea.py ../Global_Schematic_MASTER20140108.xlsx fiji ./ > fiji.json
	
	python ../scripts/generatearea.py ../Global_Schematic_MASTER20140108.xlsx melbourne ./ > melbourne.json

	python ../scripts/generatearea.py ../Global_Schematic_MASTER20140108.xlsx uluru ./ > uluru.json
	
	python ../scripts/generatearea.py ../Global_Schematic_MASTER20140108.xlsx singapore ./ > singapore.json

	python ../scripts/generatearea.py ../Glob	al_Schematic_MASTER20140108.xlsx phillipisland ./ > phillipisland.json

	python ../scripts/generatearea.py ../Global_Schematic_MASTER20140108.xlsx bluemountains ./ > bluemountains.json

	#Open the json file and confirm there are no errors reported (e.g. missing asset files.  Clean up in the json file if they are minor and can be ignored.)
	plutil -convert xml1 sydney.json -o template/plists/sydney.plist
	
	plutil -convert xml1 canberra.json -o template/plists/canberra.plist

	plutil -convert xml1 goldcoast.json -o template/plists/goldcoast.plist

	plutil -convert xml1 fiji.json -o template/plists/fiji.plist

	plutil -convert xml1 melbourne.json -o template/plists/melbourne.plist
	
	plutil -convert xml1 uluru.json -o template/plists/uluru.plist

	plutil -convert xml1 hongkong.json -o template/plists/hongkong.plist
	
	plutil -convert xml1 singapore.json -o template/plists/singapore.plist

	plutil -convert xml1 phillipisland.json -o template/plists/phillipisland.plist

	plutil -convert xml1 bluemountains.json -o template/plists/bluemountains.plist
	
	plutil -convert xml1 lakemacquarie.json -o template/plists/lakemacquarie.plist
	
##4. Generate plist for overviews
	cd overviews
	
	python ../scripts/generateoverviews.py GlobalOverviews_NEW140214_copy.xlsx overviews ./ > overviews.json
	
	plutil -convert xml1 overviews.json -o template/plists/overviews.plist

##5. Generate device bundles for overviews
	cd .
	./scripts/generateoverviewbundles.sh overviews
	
##6. Generate device bundles for the area
Once the 

1. plist has been accurately generated from the above process
2.  All area source artwork and assets have been copied into the area template directory
	- All audio in .m4a format
	- Photos in .jpg format
	- Videos in .mp4 format, 100KBps compression
3. Map & Passport icons stripped out of the psd as pngs in icon subdirectory (<B>and all named with suffix "_m" & "_p" !!</B>)
4. Vector tiles have been fetched from the open streets server

###Produce the zipped bundle files for the area for each device
	cd .
	./scripts/generatebundles.sh sydney
	./scripts/generatebundles.sh canberra
	./scripts/generatebundles.sh goldcoast
	./scripts/generatebundles.sh fiji
	./scripts/generatebundles.sh melbourne
	./scripts/generatebundles.sh uluru
	./scripts/generatebundles.sh singapore
	./scripts/generatebundles.sh phillipisland
	./scripts/generatebundles.sh bluemountains
	./scripts/generatebundles.sh lakemacquarie
	./scripts/generatebundles.sh auckland
	./scripts/generatebundles.sh christchurch
	./scripts/generatebundles.sh rotorua-and-lake-taupo
	./scripts/generatebundles.sh queenstown
	./scripts/generatebundles.sh wellington


FOR TEST PURPOSES

	./scripts/generateipadbundle.sh fiji
	./scripts/generateipadbundle.sh melbourne
	./scripts/generateipadbundle.sh uluru


##7. Generate App Icons and Launch Images
Assumes directory structure
	
	-scripts
	-AppStore
		-appicon
			(icons to be converted)
			-output
				(all sizes generated here)
		-launchimage
			-output
				(all sizes generated here)

Run the following script from the AppStore directory

	 cd AppStore
	 ../scripts/generateappicons.sh
	 

##8 Bulk Process & Upload Discount Corner

	python ./scripts/discountcorner2parse.py Global_Schematic_MASTER20140108.xlsx ALL > dc.json
	
